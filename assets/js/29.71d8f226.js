(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{361:function(s,e,n){"use strict";n.r(e);var t=n(14),a=Object(t.a)({},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h3",{attrs:{id:"egret数据请求的封装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#egret数据请求的封装","aria-hidden":"true"}},[s._v("#")]),s._v(" egret数据请求的封装")]),s._v(" "),n("p",[s._v("egret.HttpRequest的封装；")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('class HttpRequest {\n  static  Req(url:string,type:string,data:{}){\n      return new Promise((resolve,reject)=>{\n        let params:string=\'\';\n        let request:egret.HttpRequest = new egret.HttpRequest();\n        request.responseType = egret.HttpResponseType.TEXT;\n        request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");\n        // request.setRequestHeader("Authorization", `Bearer ${JSON.parse(egret.localStorage.getItem("token")) || \'\'}`);//jwt需求才加\n        \n        Object.keys(data).forEach((item)=>{\n            params+=`&${item}=${data[item]}`\n        })\n        params=params.substring(1);\n\n        if(type===\'GET\'){\n            request.open(`${url}?${params}`,egret.HttpMethod.GET);\n            request.send();\n        }\n        if(type===\'POST\'){\n            request.open(url,egret.HttpMethod.POST);\n            request.send(params);\n        }\n        request.addEventListener(egret.Event.COMPLETE,(event:egret.Event)=>{\n            let request = <egret.HttpRequest>event.currentTarget;\n             resolve(request.response);\n        },this);\n        request.addEventListener(egret.IOErrorEvent.IO_ERROR,(event:egret.IOErrorEvent)=>{\n            reject(event);\n        },this);\n        request.addEventListener(egret.ProgressEvent.PROGRESS,this.onProgress,this);\n      })\n  }\n//请求进度\n  static onProgress(event:egret.ProgressEvent):void{\n    console.log("请求进度:" + Math.floor(100*event.bytesLoaded/event.bytesTotal) + "%");\n  }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])]),n("h3",{attrs:{id:"请求数据案例；"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#请求数据案例；","aria-hidden":"true"}},[s._v("#")]),s._v(" 请求数据案例；")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    /**\n     * 登录\n     */\n    static doLogin = (username:string,userpwd:string) => (\n        new Promise((resolve)=>{\n            HttpRequest.Req(`${Url.http}${Url.Login}`,'POST',\n                {\n                    \"user_id\":username,\n                    \"password\":userpwd,\n                },\n            ).then(res => {\n                resolve(JSON.parse(`${res}`));\n            })\n            .catch(err=>{\n               egret.log(`${err.type}===>用户名或密码错误`);\n            })\n        })\n    )\n    /**\n     * 獲取本期開獎時間及上次期號及開獎號碼\n     */\n    static getCurrentScheduleIssue=(lottery_id:number)=>(\n        new Promise((resolve)=>{\n            HttpRequest.Req(`${Url.http}${Url.CurrentScheduleIssue}`,'GET',\n                {\n                    lottery_id,\n                },\n            ).then(res=>{\n                resolve(JSON.parse(`${res}`));\n            })\n            .catch(err=>{\n               egret.log(`${err.type}===>数据请求错误`);\n            })\n        })\n    )\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])]),n("h3",{attrs:{id:"开启帧频信息面板"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开启帧频信息面板","aria-hidden":"true"}},[s._v("#")]),s._v(" 开启帧频信息面板")]),s._v(" "),n("p",[s._v("Egret会在舞台的左上角显示FPS和其他性能指标\n在index文件内找到data-show-fps字段，设置为true即可\n显示帧频信息，反之关闭。\n其中:")]),s._v(" "),n("ul",[n("li",[s._v("FPS:-帧频")]),s._v(" "),n("li",[s._v("Draw:-每帧draw方法调用的平均次数，脏区域占舞台的百分比")]),s._v(" "),n("li",[s._v("Cost:-Ticker和EnterFrame阶段显示的耗时,每帧舞台所有事件处理和\n矩阵运算耗时，绘制显示对象耗时（单位是ms）")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<div style="margin: auto;width: 100%;height: 100%;" class="egret-player"\n    data-entry-class="Main"\n    data-orientation="auto"\n    data-scale-mode="fixedWidth"\n    data-frame-rate="60"\n    data-content-width="640"\n    data-content-height="1136"\n    data-multi-fingered="2"\n    data-show-fps="false" data-show-log="false"\n    data-show-fps-style="x:0,y:0,size:12,textColor:0xffffff,bgAlpha:0.9">\n</div>\ndata-entry-class:设置入口文件；\ndata-orientation：缩放方式\ndata-scale-mode:适配模式\ndata-content-widt和data-content-height：场景的宽高\ndata-show-fps和data-show-log：是否开启帧频信息；\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("h3",{attrs:{id:"点击穿透"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#点击穿透","aria-hidden":"true"}},[s._v("#")]),s._v(" 点击穿透")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("在点击生成一个物品后，要在这个物品上面能够点击穿透要在改实例对象上添加两个属性\n    _BetChip.touchEnabled = false;\n\t\t_BetChip.touchChildren = false;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])])},[],!1,null,null,null);e.default=a.exports}}]);